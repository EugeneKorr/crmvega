# üöÄ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Staging –æ–∫—Ä—É–∂–µ–Ω–∏—è (–¢–µ—Å—Ç–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä)

–¢–∞–∫ –∫–∞–∫ –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º **–µ–¥–∏–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö (Production)**, –Ω–∞–º –Ω—É–∂–Ω–æ –±—ã—Ç—å –æ—Å—Ç–æ—Ä–æ–∂–Ω—ã–º–∏ —Å –¥–∞–Ω–Ω—ã–º–∏, –Ω–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤ –±—É–¥–µ—Ç –ø—Ä–æ—â–µ.

## 1. –í–µ—Ç–∫–∞ Staging
–ú—ã —É–∂–µ –Ω–∞—Ö–æ–¥–∏–º—Å—è –≤ –≤–µ—Ç–∫–µ `staging`. –í—Å–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –±—É–¥—É—Ç –∑–¥–µ—Å—å.
–ö–æ–≥–¥–∞ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ -> –¥–µ–ª–∞–µ–º Merge –≤ `main`.

## 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Backend (Render)
1. –ó–∞–π–¥–∏—Ç–µ –≤ [Render Dashboard](https://dashboard.render.com/).
2. –ù–∞–∂–º–∏—Ç–µ **New +** -> **Web Service**.
3. –ü–æ–¥–∫–ª—é—á–∏—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π `crm-vega`.
4. **–í–∞–∂–Ω–æ:** –í –ø–æ–ª–µ **Branch** –≤—ã–±–µ—Ä–∏—Ç–µ `staging`.
5. –ò–º—è —Å–µ—Ä–≤–∏—Å–∞: `crm-backend-staging`.
6. Environment Variables (—Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏–∑ Production, –∫—Ä–æ–º–µ –æ–¥–Ω–æ–π):
   - `SUPABASE_URL`: (–∫–∞–∫ –Ω–∞ –ø—Ä–æ–¥–µ)
   - `SUPABASE_SERVICE_ROLE_KEY`: (–∫–∞–∫ –Ω–∞ –ø—Ä–æ–¥–µ)
   - `SUPABASE_ANON_KEY`: (–∫–∞–∫ –Ω–∞ –ø—Ä–æ–¥–µ)
   - `FRONTEND_URL`: –í–∞—à –±—É–¥—É—â–∏–π staging-—Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `https://crm-frontend-staging.vercel.app`)
   - `TELEGRAM_BOT_TOKEN`: ‚ö†Ô∏è **–û–ß–ï–ù–¨ –í–ê–ñ–ù–û:** –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–≥–æ –±–æ—Ç–∞ –≤ Telegram (@BotFather) –¥–ª—è —Ç–µ—Å—Ç–æ–≤.
     - *–ü–æ—á–µ–º—É?* –ï—Å–ª–∏ –≤—ã –æ—Å—Ç–∞–≤–∏—Ç–µ –±–æ–µ–≤–æ–π —Ç–æ–∫–µ–Ω, –æ–±–∞ —Å–µ—Ä–≤–µ—Ä–∞ (Prod –∏ Staging) –±—É–¥—É—Ç –¥—Ä–∞—Ç—å—Å—è –∑–∞ —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤. –ö–ª–∏–µ–Ω—Ç –ø–∏—à–µ—Ç "–ü—Ä–∏–≤–µ—Ç", –∏ —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ –º–æ–∂–µ—Ç —É–ª–µ—Ç–µ—Ç—å –Ω–∞ —Ç–µ—Å—Ç–æ–≤—ã–π —Å–µ—Ä–≤–µ—Ä, –∞ –Ω–∞ –±–æ–µ–≤–æ–º –Ω–µ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—Å—è.

## 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Frontend (Vercel)
1. –ó–∞–π–¥–∏—Ç–µ –≤ [Vercel Dashboard](https://vercel.com).
2. –ù–∞–∂–º–∏—Ç–µ **Add New...** -> **Project**.
3. –ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π `crm-vega`.
4. –ù–∞–∑–æ–≤–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç: `crm-frontend-staging`.
5. –í **Deploy Settings** —É–∫–∞–∂–∏—Ç–µ **Production Branch**: `staging`.
6. Environment Variables:
   - `VITE_API_URL`: `https://crm-backend-staging.onrender.com/api` (–ê–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ –Ω–æ–≤–æ–≥–æ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –±–µ–∫–µ–Ω–¥–∞)
   - `VITE_SOCKET_URL`: `https://crm-backend-staging.onrender.com`

---

##  Workflow —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

1. **–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞:**
   - –î–µ–ª–∞–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –ª–æ–∫–∞–ª—å–Ω–æ –≤ –≤–µ—Ç–∫–µ `staging`.
   - `git push origin staging`

2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - Vercel –∏ Render –≤–∏–¥—è—Ç –ø—É—à –∏ —Å–∞–º–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç Staging-—Å–µ—Ä–≤–µ—Ä—ã.
   - –ú—ã –∑–∞—Ö–æ–¥–∏–º –Ω–∞ `https://crm-frontend-staging.vercel.app` –∏ –ø—Ä–æ–≤–µ—Ä—è–µ–º.

3. **–†–µ–ª–∏–∑:**
   - –ï—Å–ª–∏ –≤—Å–µ –æ–∫, –¥–µ–ª–∞–µ–º Pull Request: `staging` -> `main`.
   - Vercel –∏ Render –æ–±–Ω–æ–≤–ª—è—é—Ç Production.
